{"ast":null,"code":"var _jsxFileName = \"/home/neriya/ByteMeProject2/final-project-8wkvil-codex-/frontend/src/pages/Target_Files_Panel.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_BASE = process.env.REACT_APP_API_BASE || \"http://127.0.0.1:5000\";\nexport default function FilePanel() {\n  _s();\n  const [files, setFiles] = useState([]);\n  const [fileContents, setFileContents] = useState({});\n  const [saving, setSaving] = useState(null);\n  useEffect(() => {\n    axios.get(`${API_BASE}/api/target-files`).then(res => {\n      const fetched = res.data.files || [];\n      const filtered = fetched.filter(p => !p.includes(\"block_ransom\"));\n      setFiles(filtered.map(p => ({\n        path: p,\n        label: p.split('/').pop()\n      })));\n      filtered.forEach(p => {\n        axios.get(`${API_BASE}/api/file?path=${encodeURIComponent(p)}`).then(r => {\n          setFileContents(prev => ({\n            ...prev,\n            [p]: r.data.content || \"\"\n          }));\n        }).catch(() => {\n          setFileContents(prev => ({\n            ...prev,\n            [p]: \"// ⚠️ קובץ לא נמצא או שגיאה בגישה\"\n          }));\n        });\n      });\n    });\n  }, []);\n  const handleSave = async path => {\n    setSaving(path);\n    console.log(`Saving file: ${path}`, fileContents[path]);\n    try {\n      const response = await axios.post(`${API_BASE}/api/file`, {\n        path,\n        content: fileContents[path]\n      });\n      console.log('Save response:', response.data);\n      if (response.data.status === 'success') {\n        alert('✅ קובץ נשמר בהצלחה');\n      }\n    } catch (err) {\n      var _err$response, _err$response2, _err$response2$data;\n      console.error('Save error:', ((_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.data) || err.message);\n      alert(`שגיאה בשמירת הקובץ: ${((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.error) || err.message}`);\n    }\n    setSaving(null);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gray-900 text-white py-8 px-12\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-3xl font-bold text-center mb-8\",\n      children: \"\\uD83D\\uDD10 \\u05E2\\u05E8\\u05D9\\u05DB\\u05EA \\u05E7\\u05D1\\u05E6\\u05D9 \\u05DE\\u05D8\\u05E8\\u05D4\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",\n      children: files.map(file => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-gray-800 rounded-2xl shadow-xl border border-red-700 overflow-hidden\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-red-700 py-2 px-4 flex justify-between items-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-xl font-semibold\",\n            children: [\"\\uD83D\\uDCC4 \", file.label]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleSave(file.path),\n            className: \"bg-green-600 hover:bg-green-700 text-white px-4 py-1 rounded-full transition\",\n            children: saving === file.path ? \"⏳ שומר...\" : \"💾 שמור\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          className: \"w-full h-56 bg-gray-900 text-green-400 font-mono p-4 resize-none outline-none\",\n          value: fileContents[file.path] || \"\",\n          placeholder: file.label === \"sample.txt\" ? \"📌 כאן יופיע הקובץ לדוגמה להצפנה (sample.txt)\" : \"\",\n          onChange: e => setFileContents(prev => ({\n            ...prev,\n            [file.path]: e.target.value\n          }))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 13\n        }, this)]\n      }, file.path, true, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 5\n  }, this);\n}\n_s(FilePanel, \"pRA396h36xujDGPytzRlro7a9vM=\");\n_c = FilePanel;\nvar _c;\n$RefreshReg$(_c, \"FilePanel\");","map":{"version":3,"names":["useEffect","useState","axios","jsxDEV","_jsxDEV","API_BASE","process","env","REACT_APP_API_BASE","FilePanel","_s","files","setFiles","fileContents","setFileContents","saving","setSaving","get","then","res","fetched","data","filtered","filter","p","includes","map","path","label","split","pop","forEach","encodeURIComponent","r","prev","content","catch","handleSave","console","log","response","post","status","alert","err","_err$response","_err$response2","_err$response2$data","error","message","className","children","fileName","_jsxFileName","lineNumber","columnNumber","file","onClick","value","placeholder","onChange","e","target","_c","$RefreshReg$"],"sources":["/home/neriya/ByteMeProject2/final-project-8wkvil-codex-/frontend/src/pages/Target_Files_Panel.js"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport axios from 'axios';\n\nconst API_BASE = process.env.REACT_APP_API_BASE || \"http://127.0.0.1:5000\";\n\nexport default function FilePanel() {\n  const [files, setFiles] = useState([]);\n  const [fileContents, setFileContents] = useState({});\n  const [saving, setSaving] = useState(null);\n\n  useEffect(() => {\n    axios.get(`${API_BASE}/api/target-files`).then(res => {\n      const fetched = res.data.files || [];\n      const filtered = fetched.filter(p => !p.includes(\"block_ransom\"));\n      setFiles(filtered.map(p => ({ path: p, label: p.split('/').pop() })));\n      filtered.forEach(p => {\n        axios\n          .get(`${API_BASE}/api/file?path=${encodeURIComponent(p)}`)\n          .then(r => {\n            setFileContents(prev => ({ ...prev, [p]: r.data.content || \"\" }));\n          })\n          .catch(() => {\n            setFileContents(prev => ({ ...prev, [p]: \"// ⚠️ קובץ לא נמצא או שגיאה בגישה\" }));\n          });\n      });\n    });\n  }, []);\n\n  const handleSave = async path => {\n      setSaving(path);\n      console.log(`Saving file: ${path}`, fileContents[path]);\n      \n      try {\n        const response = await axios.post(`${API_BASE}/api/file`, {\n          path,\n          content: fileContents[path],\n        });\n        console.log('Save response:', response.data);\n        \n        if (response.data.status === 'success') {\n          alert('✅ קובץ נשמר בהצלחה');\n        }\n      } catch (err) {\n        console.error('Save error:', err.response?.data || err.message);\n        alert(`שגיאה בשמירת הקובץ: ${err.response?.data?.error || err.message}`);\n      }\n      setSaving(null);\n    };\n\n  return (\n    <div className=\"min-h-screen bg-gray-900 text-white py-8 px-12\">\n      <h1 className=\"text-3xl font-bold text-center mb-8\">🔐 עריכת קבצי מטרה</h1>\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n        {files.map(file => (\n          <div key={file.path} className=\"bg-gray-800 rounded-2xl shadow-xl border border-red-700 overflow-hidden\">\n            <div className=\"bg-red-700 py-2 px-4 flex justify-between items-center\">\n              <span className=\"text-xl font-semibold\">📄 {file.label}</span>\n              <button\n                onClick={() => handleSave(file.path)}\n                className=\"bg-green-600 hover:bg-green-700 text-white px-4 py-1 rounded-full transition\"\n              >\n                {saving === file.path ? \"⏳ שומר...\" : \"💾 שמור\"}\n              </button>\n            </div>\n            <textarea\n              className=\"w-full h-56 bg-gray-900 text-green-400 font-mono p-4 resize-none outline-none\"\n              value={fileContents[file.path] || \"\"}\n              placeholder={file.label === \"sample.txt\" ? \"📌 כאן יופיע הקובץ לדוגמה להצפנה (sample.txt)\" : \"\"}\n              onChange={e => setFileContents(prev => ({ ...prev, [file.path]: e.target.value }))}\n            />\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}